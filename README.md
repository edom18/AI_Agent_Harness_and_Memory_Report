# OpenClaw Architecture Analysis

このプロジェクトは、AIアシスタント **OpenClaw** の内部挙動、アーキテクチャ、および設計パターンを調査・分析し、ドキュメントとしてまとめたものです。

ソースコードを深く掘り下げ、起動プロセスから会話フロー、メモリ管理戦略、自己成長メカニズムに至るまで、OpenClawがどのように動作しているかを解明することを目的としています。

## 📂 ディレクトリ構成

プロジェクトは主に2つのセクションで構成されています。

### 1. Architecture Overview (`architecture_overview/`)
システム全体の基本的な動作原理やフローに関する概説ドキュメントです。

- **[startup_sequence.md](architecture_overview/startup_sequence.md)**
  - CLIのエントリーポイントからエージェントが初期化されるまでの詳細な起動シーケンス。
  
- **[conversation_flow.md](architecture_overview/conversation_flow.md)**
  - ユーザー入力からLLMによる推論、ツール実行、応答生成までのターンベースの処理フロー。

- **[agents_md_meta_prompt_jp.md](architecture_overview/agents_md_meta_prompt_jp.md)** (英語版: [agents_md_meta_prompt.md](architecture_overview/agents_md_meta_prompt.md))
  - `AGENTS.md` ファイルがどのように「メタプロンプト」として機能し、動的にコンテキストを構築するかについての解説。

- **[system_prompt.md](architecture_overview/system_prompt.md)**
  - システムプロンプトの構築ロジックとインジェクションの仕組み。

### 2. Analysis Reports (`analysis-reports/`)
特定のサブシステムや機能に焦点を当てた、より詳細な技術分析レポートです。

- **[01-memory-strategy.md](analysis-reports/01-memory-strategy.md)**
  - OpenClawの4層メモリ構造（セッション、トランスクリプト、ベクトルインデックス、コンパクション）の完全な分析。
  
- **[02-harness-framework.md](analysis-reports/02-harness-framework.md)**
  - テストおよび検証のためのハーネスフレームワークの構造と使用法。

- **[03-self-growth-mechanisms.md](analysis-reports/03-self-growth-mechanisms.md)**
  - エージェントが経験を通じて自己改善・学習するためのメカニズムの調査。

> **Note**: `analysis-reports/browser/` ディレクトリには、これらのレポートのHTML版が含まれており、ブラウザで閲覧可能です。

## 🔍 主要な調査結果のハイライト

### メモリ管理の階層化
OpenClawは、揮発性のキャッシュ、ファイルベースのセッションログ、そして長期的なベクトル検索インデックス（SQLite）を組み合わせた高度なメモリ戦略を採用しています。これにより、短期的な文脈維持と長期的な知識検索を両立させています。

### メタプロンプト駆動
ハードコードされたロジックではなく、`AGENTS.md` や `SOUL.md` などのMarkdownファイルを「メタプロンプト」として読み込み、エージェントの挙動やペルソナを動的に定義する柔軟なアーキテクチャを持っています。

### ターンベースの自律実行
ユーザーの1つのリクエストに対して、エージェントが複数回思考し、ツールを実行し、結果を評価してから最終回答を行う「マルチターン」の実行ループを持っています。

---
*Generated by Antigravity Agent*
